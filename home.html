<!DOCTYPE html>
<html lang="pt">
<head>

  <meta charset="UTF-8">
  <title>Menu Circular com Câmera de Fundo</title>
 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <!--chamar p5-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>


    <title>Menu de Scroll</title>


    <style>
      
        .menu::-webkit-scrollbar {
            display: none;
        }


       
/* Lista de palavras centralizada dentro do menu */
#wordList {
      list-style: none;
      padding: 0;
      margin: 0;
      position: relative;
      height: 100%;
      width: 100%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
 #wordList li {
  margin: 10px 0;
  padding: 20px;
  font-size: 48px;
  transition: opacity 0.3s;
  pointer-events: none; /* bloqueia clique por padrão */
}

#wordList li#nistagmo {
  pointer-events: auto; /* permite clique apenas no Nistagmo */
  cursor: pointer;
}
#wordList li.estrabismo {
  pointer-events: auto;
  cursor: pointer;
}

  /* Reset simples e sem scroll na página */
  html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: sans-serif;
    }
    
    /* Câmera de fundo ocupa toda a tela */
    #camera {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
    }
    
    /* Painel de menu branco que desliza */
    #menu {
      position: fixed;
      top: 0;
      right: 0;
      width: 600px;
      height: 100%;
      background: rgba(255, 255, 255, 0.95);
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    
    /* Classe que abre o menu */
    #menu.open {
      transform: translateX(0%);
    }
    
    /* Ícone de controlo para abrir/fechar o menu */
    #menuIcon {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
    
    </style>

</head>
<body>
  <!-- Vídeo de fundo com stream da câmara -->
  <video id="camera" autoplay playsinline></video>

  <!-- Painel de menu que desliza -->
  <div id="menu">
    <ul id="wordList">
      <li >Tritanopia</li>
      <li>Protanopia</li>
      <li id="nistagmo" >Nistagmo</li>   <!-- Ativar filtro abanar -->
      <li>Glaucoma</li>
      <li>Miopia</li>
      <li class="estrabismo" id="estrabismoVertical">Estrabismo III par</li> <!-- Ativar filtro estrabismo currentF 1 -->
      <li class="estrabismo" id="estrabismoHorizontal">Estrabismo IV par</li> <!-- Ativar filtro estrabismo currentF 2  -->
      <li class="estrabismo" id="estrabismoDiagonal">Estrabismo VI par</li> <!-- Ativar filtro estrabismo currentF 3 -->

      <!-- <li class="estrabismo" data-filter="1">Estrabismo III par</li>
<li class="estrabismo" data-filter="2">Estrabismo IV par</li> Ativar filtro estrabismo currentF 2  
<li class="estrabismo" data-filter="3">Estrabismo VI par</li>  -->
    
      <li>Acromatopsia</li>
      <li>Deuteranopia</li>
    </ul>
  </div>
  
  <!-- Ícone para abrir/fechar o menu -->
  <div id="menuIcon">&#9776;</div>
  
  <script>
    // 1. Ativar a câmara de fundo
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
          document.getElementById('camera').srcObject = stream;
        })
        .catch(function(err) {
          console.error("Erro ao aceder à câmara:", err);
        });
    }

    // 2. Alternar a exibição do menu ao clicar no ícone
    document.getElementById('menuIcon').addEventListener('click', function(){
      document.getElementById('menu').classList.toggle('open');
    });
    
    // 3. Função para atualizar a opacidade dos itens com base na sua distância ao centro
    function updateOpacities() {
      const list = document.getElementById('wordList');
      const centerY = list.clientHeight / 2;
      
      // Para cada item da lista, calcula a sua posição central e atualiza a opacidade
      Array.from(list.children).forEach(li => {
        // Obtemos as dimensões do item relativamente ao contêiner da lista
        const rect = li.getBoundingClientRect();
        const listRect = list.getBoundingClientRect();
        // Centro vertical do item
        const itemCenter = rect.top + rect.height / 2 - listRect.top;
        const distance = Math.abs(centerY - itemCenter);
        // Regula a opacidade: se o item estiver no centro = opacidade 1, caso contrário diminui (valor mínimo de 0.2)
        const opacity = Math.max(0.2, 1 - distance / (centerY));
        li.style.opacity = opacity;
      });
    }
    
    // Atualiza a opacidade inicialmente
    updateOpacities();
    

    // 4. Lidar com o scroll para criar a rotação infinita da lista
    const menu = document.getElementById('menu');
    const wordList = document.getElementById('wordList');

    menu.addEventListener('wheel', (e) => {
      e.preventDefault();
      if (e.deltaY > 0) {
        // Se o scroll for para baixo, move o primeiro item para o final
        const firstItem = wordList.firstElementChild;
        wordList.appendChild(firstItem);
      } else if (e.deltaY < 0) {
        // Se o scroll for para cima, move o último item para o início
        const lastItem = wordList.lastElementChild;
        wordList.insertBefore(lastItem, wordList.firstElementChild);
      }
      // Atualiza as opacidades após a rotação
      updateOpacities();
    });

        // Evento de scroll controlado pelo utilizador
        menu.addEventListener('scroll', () => {
            // Volta ao início se chegar ao meio da rolagem (efeito infinito)
            if (menu.scrollTop >= menu.scrollHeight / 2) {
                menu.scrollTop = 1; // pequeno valor para evitar salto visual
            }
            updateOpacity();
        });
    
        // Inicializa a opacidade corretamente ao carregar
        //updateOpacity();
    </script>

   <script src="estrabismo2.js"></script> 
<script src="nistagmo.js"></script>


</body>
</html>

